{% extends 'admin/nav.html' %}
{% load static %}

{% block title %}
<title>C E | Page Settings</title>
{% endblock %}

{% block body_block %}

<style>
  /* Modern Tech Look */
  .tech-card {
    background: #ffffff;
    border-radius: 14px;
    padding: 30px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.1);
    border: 1px solid #e5e5e5;
  }

  .tech-title {
    font-weight: 700;
    font-size: 1.6rem;
    color: #1a237e; /* Deep tech blue */
  }

  .nav-tabs .nav-link {
    font-weight: 600;
    color: #1a237e;
    border-radius: 8px 8px 0 0;
  }

  .nav-tabs .nav-link.active {
    background: #1a237e;
    color: #fff;
    border-color: #1a237e;
  }

  label {
    font-weight: 600;
    color: #37474f;
  }

  .btn-tech {
    background: #1a237e;
    padding: 10px 30px;
    border-radius: 8px;
    color: white;
    font-weight: 600;
  }

  .btn-tech:hover {
    background: #0d185f;
    color: #fff;
  }

  /* Smooth input fields */
  .form-control, textarea {
    border-radius: 10px;
    border: 1px solid #cfd8dc;
  }

  .form-control:focus {
    border-color: #1a237e;
    box-shadow: 0 0 0 0.2rem rgba(26,35,126,0.2);
  }
</style>

<section class="container-fluid mt-3 p-2 p-sm-3">
  <div class="container tech-card">

    <h2 class="text-center tech-title mb-4">Page Settings</h2>

    <!-- Tabs -->
    <ul class="nav nav-tabs fw-bold mb-4" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" data-bs-toggle="tab" href="#about-tab">About</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-bs-toggle="tab" href="#contact-tab">Contact</a>
      </li>
    </ul>

    <!-- Messages -->
    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }} text-center" id="msg">
          {{ message }}
        </div>
      {% endfor %}
    {% endif %}

    <script>
      setTimeout(() => {
        let m = document.getElementById('msg');
        if (m) m.style.display = "none";
      }, 5000);
    </script>

    <script src="/static/ckeditor/ckeditor.js"></script>

    <!-- Tab Contents -->
    <div class="tab-content">

      <!-- ABOUT TAB -->
      <div class="tab-pane fade show active" id="about-tab">
        <h5 class="fw-bold text-center mb-3">About Us</h5>

        <form method="POST">
          {% csrf_token %}

          <label class="mt-2">Vision:</label>
          <textarea name="Vission" id="vision_editor">{{ about.c_vision }}</textarea>

          <label class="mt-3">Mission:</label>
          <textarea name="Mission" id="mission_editor">{{ about.c_mission }}</textarea>

          <div class="text-center mt-4">
            <button type="submit" name="save_about" class="btn btn-tech">
              <i class="bi bi-save"></i> Update
            </button>
          </div>

        </form>
      </div>

      <!-- CONTACT TAB -->
      <div class="tab-pane fade" id="contact-tab">
        <h5 class="fw-bold text-center mb-3">Contact Us</h5>

        <form method="POST">
          {% csrf_token %}

          <label class="mt-2">Address:</label>
          <textarea name="product_description" id="address_editor">{{ contact.c_address }}</textarea>

          <label class="mt-3">Email:</label>
          <input type="email" class="form-control" name="email" value="{{ contact.c_email }}" placeholder="Enter email">

          <label class="mt-3">Phone:</label>
          <input type="text" class="form-control" name="phone" value="{{ contact.c_phone }}" placeholder="Enter phone number">

          <div class="text-center mt-4">
            <button type="submit" name="save_contact" class="btn btn-tech">
              <i class="bi bi-save"></i> Update
            </button>
          </div>

        </form>
      </div>

    </div>
  </div>
</section>

<script>
  CKEDITOR.replace('vision_editor');
  CKEDITOR.replace('mission_editor');
  CKEDITOR.replace('address_editor');
</script>

{% endblock %}
