{% extends 'admin/nav.html' %}
{% load static %}

{% block title %}
<title>C E | Page Settings</title>
{% endblock %}

{% block body_block %}
<section class="container-fluid mt-2 p-2 p-sm-3">
  <div class="container mt-4 shadow-lg p-3 p-sm-4 rounded">
    <h4 class="mb-3 text-center fw-bold">Page Settings</h4>

    <!-- Tabs (unchanged) -->
    <ul class="nav nav-tabs fw-bold mb-3" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" data-bs-toggle="tab" href="#about-tab">About</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-bs-toggle="tab" href="#contact-tab">Contact</a>
      </li>
    </ul>

    <!-- Messages -->
    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }} text-center" role="alert" id="msg">
          {{ message }}
        </div>
      {% endfor %}
    {% endif %}

    <script>
      // Auto-hide messages after 10 seconds
      setTimeout(function() {
        var msg = document.getElementById('msg');
        if (msg) msg.style.display = 'none';
      }, 10000);
    </script>

    <!-- Tab Content -->
    <div class="tab-content">
      <!-- About Form -->
      <div class="tab-pane fade show active" id="about-tab">
        <h5 class="text-center fw-bold mb-3">About Us</h5>
        <form method="POST">
          {% csrf_token %}
          <div class="row g-3 mb-3">
            <label for="editor1" class="col-12 col-md-2 col-form-label fw-bold">Vision:</label>
            <div class="col-12 col-md-10">
              <textarea class="form-control" name="Vission" rows="3">{{ about.c_vision }}</textarea>
            </div>
          </div>
          <div class="row g-3 mb-3">
            <label for="Mission" class="col-12 col-md-2 col-form-label fw-bold">Mission:</label>
            <div class="col-12 col-md-10">
              <textarea class="form-control" name="Mission" rows="3">{{ about.c_mission }}</textarea>
            </div>
          </div>
          <div class="d-flex justify-content-center mt-2">
            <button type="submit" name="save_about" class="btn btn-primary">
              <i class="bi bi-save"></i> Update
            </button>
          </div>
        </form>
      </div>

      <!-- Contact Form -->
      <div class="tab-pane fade" id="contact-tab">
        <h5 class="text-center fw-bold mb-3">Contact Us</h5>
        <form method="POST">
          {% csrf_token %}
          <div class="row g-3 mb-3">
            <label for="editor2" class="col-12 col-md-2 col-form-label fw-bold">Address:</label>
            <div class="col-12 col-md-10">
              <textarea class="form-control" name="address" rows="3">{{ contact.c_address }}</textarea>
            </div>
          </div>
          <div class="row g-3 mb-3">
            <label for="email" class="col-12 col-md-2 col-form-label fw-bold">Email:</label>
            <div class="col-12 col-md-10">
              <input type="email" class="form-control" id="email" name="email"
                     value="{{ contact.c_email }}" placeholder="Enter email">
            </div>
          </div>
          <div class="row g-3 mb-3">
            <label for="phone" class="col-12 col-md-2 col-form-label fw-bold">Phone:</label>
            <div class="col-12 col-md-10">
              <input type="text" class="form-control" id="phone" name="phone"
                     value="{{ contact.c_phone }}" placeholder="Enter phone number">
            </div>
          </div>
          <div class="d-flex justify-content-center mt-2">
            <button type="submit" name="save_contact" class="btn btn-primary">
              <i class="bi bi-save"></i> Update
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>
{% endblock %}
